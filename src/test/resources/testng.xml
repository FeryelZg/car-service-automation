<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">

<suite name="AutoTeam E2E Test Suite" verbose="1" parallel="false">

    <!-- =================================================================== -->
    <!-- COMPLETE E2E FLOW: Create appointment â†’ Verify in backoffice       -->
    <!-- =================================================================== -->
    <test name="Complete E2E Appointment Flow with Calendar" preserve-order="true">
        <parameter name="browser" value="chrome"/>

        <groups>
            <run>
                <include name="e2e"/>
                <include name="appointment"/>
                <include name="backoffice"/>
                <include name="calendar"/>
            </run>
        </groups>

        <classes>
            <!-- STEP 1: Create appointment in end-user app -->
            <class name="com.carservice.automation.tests.enduser.BookAppointmentTest">
                <methods>
                    <!-- UPDATE: Change method name to match your implementation -->
                    <include name="testCompleteAppointmentFlow_AllScenarios"/>
                </methods>
            </class>

            <!-- STEP 2: Verify appointment appears in backoffice -->
            <class name="com.carservice.automation.tests.backoffice.InterventionSchedulingTest">
                <methods>
                    <!-- This test depends on the appointment being created above -->
                    <include name="shouldScheduleInterventionInCalendar"/>
                    <include name="shouldRespectSchedulingConstraints"/>

                </methods>
            </class>

            <!-- STEP 3: Schedule appointment in calendar -->
            <class name="com.carservice.automation.tests.backoffice.InterventionSchedulingTest">
                <methods>
                    <include name="shouldRespectSchedulingConstraints"/>
                    <include name="shouldPerformDragAndDropSuccessfully"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- =================================================================== -->
    <!-- SMOKE TESTS: Quick validation of critical functionality             -->
    <!-- =================================================================== -->
    <test name="Smoke Tests" preserve-order="false">
        <parameter name="browser" value="chrome"/>

        <groups>
            <run>
                <include name="smoke"/>
            </run>
        </groups>

        <classes>

            <class name="com.carservice.automation.tests.enduser.BookAppointmentTest"/>
            <class name="com.carservice.automation.tests.backoffice.InterventionSchedulingTest">
                <methods>
                    <include name="shouldScheduleInterventionInCalendar"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- =================================================================== -->
    <!-- END USER TESTS: Frontend appointment creation and validation        -->
    <!-- =================================================================== -->
    <test name="End User Application Tests" preserve-order="false">
        <parameter name="browser" value="chrome"/>

        <groups>
            <run>
                <include name="appointment"/>
                <include name="enduser"/>
                <include name="frontend"/>
            </run>
        </groups>

        <classes>
            <!-- UPDATE: Replace with your actual end-user test classes -->
            <class name="com.carservice.automation.tests.enduser.BookAppointmentTest">
                <methods>
                    <!-- Include all your appointment-related test methods -->
                    <include name="testCompleteAppointmentFlow_AllScenarios"/>
                </methods>
            </class>

            <!-- ADD: Include other end-user test classes if you have them -->
<!--             <class name="com.carservice.automation.tests.enduser.LoginTest"/> -->
<!--             <class name="com.carservice.automation.tests.enduser.NavigationTest"/> -->
        </classes>
    </test>

</suite>